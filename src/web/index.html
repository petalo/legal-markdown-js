<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legal Markdown JS - Playground</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app-container">
    <header class="app-header">
      <h1>Legal Markdown JS - Playground</h1>
      <div class="header-actions">
        <a href="https://github.com/petalo/legal-markdown-js" target="_blank" rel="noopener noreferrer" class="repo-link" title="View project repository">
          📋 Repository
        </a>
        <button class="theme-toggle" title="Toggle theme">🌙</button>
        <button class="help-btn" title="Help">❓</button>
      </div>
    </header>

    <main class="editor-container">
      <div class="input-panel">
        <div class="panel-header">
          <h3>Input</h3>
          <div class="panel-actions">
            <label class="file-input-label">
              📁 Upload File
              <input type="file" class="file-input" accept=".md,.txt" style="display: none;">
            </label>
            <div class="example-dropdown">
              <select class="example-select">
                <option value="">📄 Examples</option>
                <option value="service-agreement">Services Agreement</option>
                <option value="demo-contract">Software Development Agreement</option>
                <option value="lease-contract">Office Lease Agreement</option>
                <option value="purchase-ticket">Purchase Ticket</option>
                <option value="nda">Non-Disclosure Agreement</option>
                <option value="employment-contract">Employment Contract</option>
                <option value="features-demo">🎯 Features Demo</option>
              </select>
            </div>
          </div>
        </div>
        <textarea class="editor" placeholder="Enter your Legal Markdown content here...

Select an example from the dropdown above to get started, or write your own content using YAML front matter and Legal Markdown syntax.

Example structure:
---
title: Document Title
variable: value
---

# {{title}}

Your content with {{variable}} substitutions..."></textarea>
      </div>

      <div class="column-resizer" id="resizer1"></div>

      <!-- CSS Editor Panel -->
      <div class="css-panel">
        <div class="panel-header">
          <h3>Custom CSS</h3>
          <div class="panel-actions">
            <label class="file-input-label">
              📁 Upload CSS
              <input type="file" class="css-file-input" accept=".css" style="display: none;">
            </label>
            <div class="example-dropdown">
              <select class="css-example-select">
                <option value="">🎨 CSS Examples</option>
                <option value="default">Default Legal Styles</option>
                <option value="modern">Modern Style</option>
                <option value="classic">Classic Legal</option>
                <option value="minimal">Minimal</option>
              </select>
            </div>
            <button class="css-reset secondary">🔄</button>
          </div>
        </div>
        <div class="css-content">
          <textarea class="css-editor" placeholder="Enter your custom CSS here...

/* Example: Change document colors */
body {
    background: #f9f9f9;
    color: #333;
}

h1 {
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
}

/* Example: Customize spacing */
p {
    margin-bottom: 1.2em;
    line-height: 1.6;
}

/* Your custom styles here... */"></textarea>
        </div>
      </div>

      <div class="column-resizer" id="resizer2"></div>

      <div class="output-panel">
        <div class="panel-header">
          <h3>Preview</h3>
          <div class="panel-actions">
            <button class="toggle-styles-btn" title="Toggle base styles">🎨</button>
            <button class="process-btn">▶️</button>
            <button class="download-btn secondary">💾</button>
            <button class="download-pdf-btn secondary">📄</button>
            <button class="print-btn secondary">🖨️</button>
          </div>
        </div>
        <div class="preview-container">
          <div class="preview-split">
            <div class="preview-block markdown-preview">
              <div class="preview-header">
                <h4>Markdown Output</h4>
                <button class="copy-btn" data-target="markdown" title="Copy markdown">📋</button>
              </div>
              <div class="preview-content">
                <div class="preview-placeholder">
                  <p>👈 Enter your Legal Markdown content and click Process to see the result</p>
                </div>
              </div>
            </div>
            <div class="preview-resize-handle"></div>
            <div class="preview-block html-preview">
              <div class="preview-header">
                <h4>HTML Preview</h4>
                <button class="copy-btn" data-target="html" title="Copy HTML">📋</button>
              </div>
              <div class="preview-content">
                <div class="preview-placeholder">
                  <p>👈 Enter your Legal Markdown content and click Process to see the result</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="options-panel">
      <button class="options-toggle">🔽 Processing Options</button>
      <div class="options-content open">
        <div class="options-grid">
          <div class="option-group">
            <label>Processing Control</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="debug"> Debug mode
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Shows detailed processing information in the console, including step-by-step parsing and variable substitution details.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="yamlOnly"> Skip YAML
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Skip YAML variable substitution in content. Returns raw markdown with variables unprocessed (e.g., {{title}} stays as {{title}}). Useful for testing content without variable replacement.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="noHeaders"> No headers
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Disables automatic header numbering (l., ll., lll.) that's typically used in legal documents.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="enableFieldTracking" checked> Field tracking
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Adds HTML spans around template variables and headers for debugging and styling. When disabled, maintains compatibility with Ruby version.</span>
                </span>
              </label>
            </div>
          </div>

          <div class="option-group">
            <label>Advanced Options</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="noClauses"> No clauses
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Disables processing of structured clauses and conditional blocks (e.g., [text]{condition}). Content will be processed as plain text.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="noReferences"> No references
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Disables processing of cross-references and citation links within the document. References will appear as plain text.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="noMixins"> No mixins
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Disables processing of mixins and helper functions (e.g., {{formatDate()}}, {{capitalize()}}). Only basic variable substitution will work.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="noImports"> No imports
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Disables importing of external markdown files. Import statements will be ignored and appear as plain text.</span>
                </span>
              </label>
            </div>
          </div>

          <div class="option-group">
            <label>Header Options</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="noReset"> No reset
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Prevents resetting header counters. Header numbering will continue from previous values instead of starting fresh.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="noIndent"> No indent
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Disables automatic indentation of nested headers and sub-clauses. All content will be left-aligned.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="throwOnYamlError"> Throw on YAML error
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Stops processing and shows an error if YAML front matter is malformed. Otherwise, continues with partial parsing.</span>
                </span>
              </label>
            </div>
          </div>

          <div class="option-group">
            <label>Export Options</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="exportYaml"> Export YAML
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Exports document metadata as a YAML file alongside the processed markdown. Useful for data exchange and backup.</span>
                </span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="exportJson"> Export JSON
                <span class="tooltip">
                  <span class="tooltip-icon">ℹ️</span>
                  <span class="tooltip-text">Exports document metadata as a JSON file alongside the processed markdown. Useful for integration with other systems.</span>
                </span>
              </label>
            </div>
            <input type="text" id="title" placeholder="Document title (optional)">
          </div>
        </div>
      </div>
    </footer>

    <div id="messageArea"></div>
  </div>

  <script type="module">
    // Import the modern ES module bundle
    import LegalMarkdown from './legal-markdown-browser.js';

    // Make it available globally for the playground code
    window.LegalMarkdown = LegalMarkdown;
    // Simple verification that the library loaded correctly
    if (typeof window.LegalMarkdown === 'undefined') {
      console.error('Legal Markdown library not loaded');
    } else {
      console.log('✅ Legal Markdown library loaded successfully');
      console.log('Available functions:', Object.keys(window.LegalMarkdown));
    }
  </script>

  <!-- Load examples and CSS examples -->
  <script src="./examples.js"></script>
  <script src="./css-examples.js"></script>

  <!-- Load main application logic -->
  <script src="./app.js"></script>
</body>

</html>
